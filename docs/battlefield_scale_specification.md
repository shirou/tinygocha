# 戦場スケール仕様書

## 概要

TinyGochaの戦場スケールを500m四方、5000ピクセル四方で設計する仕様書です。

## 基本スケール設定

### 戦場サイズ
- **実世界サイズ**: 500m × 500m
- **ピクセルサイズ**: 5000px × 5000px
- **スケール比**: 1ピクセル = 10cm

### スケール計算基準
```
500m = 5000px
1px = 0.1m = 10cm
```

## ユニットサイズ仕様

### 人型ユニット
- **実際のサイズ**: 身長170cm、肩幅50cm
- **ピクセルサイズ**: 17px × 5px（縦×横）
- **ゲーム表現**: 16px × 16px（視認性重視）

### 騎兵ユニット
- **実際のサイズ**: 馬体長250cm、幅150cm
- **ピクセルサイズ**: 25px × 15px
- **ゲーム表現**: 24px × 16px

### 重装歩兵
- **実際のサイズ**: 身長170cm + 装備幅
- **ピクセルサイズ**: 17px × 8px
- **ゲーム表現**: 16px × 16px

## 移動速度仕様

### 歩兵系ユニット
| ユニット種別 | 実速度 | ピクセル/秒 | ピクセル/フレーム(60FPS) |
|-------------|--------|-------------|-------------------------|
| 軽装歩兵（歩行） | 5km/h | 13.9px/s | 0.23px/f |
| 軽装歩兵（駆け足） | 12km/h | 33.3px/s | 0.56px/f |
| 重装歩兵（歩行） | 3km/h | 8.3px/s | 0.14px/f |
| 重装歩兵（駆け足） | 8km/h | 22.2px/s | 0.37px/f |

### 騎兵系ユニット
| 移動状態 | 実速度 | ピクセル/秒 | ピクセル/フレーム(60FPS) |
|----------|--------|-------------|-------------------------|
| 常歩 | 6km/h | 16.7px/s | 0.28px/f |
| 速歩 | 15km/h | 41.7px/s | 0.69px/f |
| 駆け足 | 25km/h | 69.4px/s | 1.16px/f |
| 襲歩（突撃） | 40km/h | 111.1px/s | 1.85px/f |

## 射程距離仕様

### 弓兵系
| 弓の種類 | 実射程 | ピクセル射程 | ゲーム内表現 |
|----------|--------|-------------|-------------|
| 短弓（有効） | 80m | 800px | 800px |
| 短弓（最大） | 150m | 1500px | 1200px |
| 長弓（有効） | 120m | 1200px | 1200px |
| 長弓（最大） | 250m | 2500px | 2000px |
| 複合弓（有効） | 100m | 1000px | 1000px |
| 複合弓（最大） | 200m | 2000px | 1600px |

### 魔術師系
| 魔法種別 | 実射程 | ピクセル射程 | ゲーム内表現 |
|----------|--------|-------------|-------------|
| 火球術 | 50m | 500px | 500px |
| 雷撃術 | 80m | 800px | 800px |
| 氷槍術 | 60m | 600px | 600px |
| 範囲魔法 | 30m | 300px | 300px |

## 地形要素サイズ

### 自然地形
| 地形要素 | 実サイズ | ピクセルサイズ | 備考 |
|----------|----------|---------------|------|
| 大木 | 直径5m | 50px | 移動阻害 |
| 茂み | 3m×3m | 30px×30px | 隠蔽効果 |
| 岩石 | 2m×2m | 20px×20px | 遮蔽物 |
| 小川 | 幅2m | 20px幅 | 移動速度減少 |

### 建造物
| 建造物 | 実サイズ | ピクセルサイズ | 備考 |
|--------|----------|---------------|------|
| 小屋 | 5m×5m | 50px×50px | 遮蔽物 |
| 塔 | 直径8m | 80px | 高所射撃 |
| 城壁 | 高さ5m、厚さ2m | 20px厚 | 防御拠点 |
| 門 | 幅4m | 40px | 通路 |

## 視界・索敵範囲

### ユニット別視界
| ユニット種別 | 実視界 | ピクセル視界 | 備考 |
|-------------|--------|-------------|------|
| 歩兵 | 100m | 1000px | 基本視界 |
| 弓兵 | 150m | 1500px | 遠距離索敵 |
| 騎兵 | 200m | 2000px | 高機動索敵 |
| 魔術師 | 120m | 1200px | 魔法感知 |
| 斥候 | 250m | 2500px | 専門索敵 |

### 地形による視界修正
| 地形 | 視界修正 | 効果 |
|------|----------|------|
| 平原 | +20% | 見通し良好 |
| 森林 | -40% | 木々による遮蔽 |
| 丘陵 | +30% | 高所からの視界 |
| 谷間 | -30% | 地形による制限 |

## カメラ・表示仕様

### 画面表示範囲
- **ウィンドウサイズ**: 1024px × 768px
- **表示可能範囲**: 戦場全体の約20% × 15%
- **実世界換算**: 約102m × 77m

### ズーム機能
| ズームレベル | 表示範囲 | 1ピクセル当たり | 用途 |
|-------------|----------|----------------|------|
| 100% (1.0x) | 102m×77m | 10cm | 通常戦闘 |
| 50% (0.5x) | 204m×154m | 20cm | 戦術俯瞰 |
| 200% (2.0x) | 51m×38m | 5cm | 詳細戦闘 |
| 25% (0.25x) | 408m×308m | 40cm | 全体俯瞰 |

### スクロール仕様
- **スクロール速度**: 最大100px/秒（実世界10m/秒相当）
- **スクロール範囲**: 戦場全体（5000px × 5000px）
- **境界処理**: 戦場端で停止

## パフォーマンス考慮事項

### 描画最適化
- **カリング範囲**: 画面外+100pxマージン
- **LOD（詳細度）**: ズームレベルに応じた描画簡略化
- **最大同時表示ユニット**: 500体

### メモリ使用量
- **戦場マップ**: 5000×5000 = 25,000,000ピクセル
- **地形データ**: 約100MB（詳細地形情報含む）
- **ユニットデータ**: 最大500体 × 1KB = 500KB

## 実装上の注意点

### 座標系
- **原点**: 戦場左上角 (0, 0)
- **座標範囲**: X: 0-4999, Y: 0-4999
- **単位**: ピクセル座標（整数）

### 当たり判定
- **ユニット**: 16px × 16px の矩形
- **射撃**: 線分による判定
- **範囲攻撃**: 円形または矩形範囲

### 移動処理
- **移動単位**: 0.1ピクセル（サブピクセル精度）
- **経路探索**: A*アルゴリズム使用
- **障害物回避**: 動的回避アルゴリズム

## 今後の拡張予定

### 戦場サイズ拡張
- **1km四方**: 10000px × 10000px
- **複数戦場**: 戦場間移動システム

### 3D要素
- **高度情報**: Z軸座標の追加
- **立体的な地形**: 山岳、渓谷の表現

### 動的地形
- **破壊可能建造物**: 攻撃による地形変化
- **天候システム**: 視界・移動への影響
